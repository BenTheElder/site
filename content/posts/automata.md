---
markup: md
date: "2017-06-03"
title: Automata
categories:
- JavaScript
- CS
---
<noscript><div class="full-width tile centered centered-text warning" style="margin-bottom: 1em;"><p class="title centered centered-text">JavaScript is required to view the demos in this post.</h3><h3 class="bold centered centered-text" style="margin-bottom: 0;">Please <a href="http://www.enable-javascript.com/" target="_blank" rel="noopener noreferrer">enable JavaScript</a>.</h3></div></noscript>
<p><div style="float:right; width: 6.91em; padding-left: 1em; padding-bottom: 1em;"><img style="margin: auto" src="/images/Game_of_life_pulsar_lossy.gif"></img><div class="centered-text"><a href="https://en.wikipedia.org/wiki/File:Game_of_life_pulsar.gif">A pulsar.</a></div></div>'Automata' or <a href="https://en.wikipedia.org/wiki/Automaton">'automaton'</a> refer to self-operating machines or <span class="italic">devices that function automatically</span>. While the earliest usage of the term referred to mechanical devices, in computer science 'automata' and <a class="" href="https://en.wikipedia.org/wiki/Automata_theory">automata theory</a> include <span class="italic">abstract</span> machines instead of physical devices. Where a physical automaton might be constructed of complex gears and clockwork, an abstract automata is constructed of <a href="https://en.wikipedia.org/wiki/State_(computer_science)">state</a> and rules that define how state is updated in each iteration or 'generation' of the automata.</p>
<!--hack for markdown-->
<div style="display: none"></div>

  <p></p>
  <hr class="clear"/>
  <p></p>
  <p class="section-title">Cellular Automata</p>
  <a href="https://en.wikipedia.org/wiki/Cellular_automaton">Cellular automata</a> are an interesting class of automata consisting of a grid of cells where each cell represents some state that is updated every iteration. While not-neccessarily particularly useful, some cellular automata display fascinating stable oscillating patterns or are even <a href="https://en.wikipedia.org/wiki/Turing-complete">Turing-complete</a>. It is also worth noting that some patterns in nature have been observed that appear to be generated by natural cellular automata. In particular the <a href="https://en.wikipedia.org/wiki/Conus_textile">Conus textile sea snail</a>'s shells display pigment patterns similar to a cellular automaton.
  <p></p><br/>
  <p class="no-margin">Below are some examples of cellular automata with live JavaScript demos using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">HTML5 Canvas</a>.</p>
  <p></p><br/>
  <hr/>
  <br/>


  <p class="title">Conway's Game of Life</p>

  <p><a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway's Game of Life</a> is a cellular automata created by <a href="https://en.wikipedia.org/wiki/John_Horton_Conway">John Conway</a> where all cells are `live` or `dead`. Conway's Game of Life updates with the following rules:</p>

  1) A `live` cell with less than two `live` neighbours dies (as if by loneliness)\
  2) A `live` cell with two or three `live` neighbours stays `live`\
  3) A `live` cell with more than three `live` neighbours dies (as if by overpopulation)\
  4) A `dead` cell with three `live` neighbours becomes a `live` cell (as if by reproduction)\


This is probably the most famous of all cellular automata. Additionally, the
 pulsar from the begining of this post is an example, though the demo's
 colors are reversed.  

<div class="full-bleed" style="margin-bottom: 0.25em; padding: 0">
<canvas id="gol-canvas" style="width: 100%;" height="1080" width="1920">
<div class="centered-text white title" style="background-color: black; padding: 1em">Please <a href="http://www.enable-javascript.com/">enable JavaScript</a> to see this demo.</div>
</canvas>
</div>
<div class="centered-text"><button id="gol-pause"><i class="material-icons">pause</i></button><button tabindex="0" onclick="doReset(event, this, initGOL)"><i class="material-icons">replay</i></img></button></div>
<div class="centered-text">Conway's Game of Life with a beacon, blinker, monogram, and <a href="https://en.wikipedia.org/wiki/Gun_(cellular_automaton)">Gosper's Glider Gun</a>.</div>

In the top right of the demo we have a <a href="http://conwaylife.com/w/index.php?title=Beacon">beacon</a> and <a href="http://conwaylife.com/w/index.php?title=Blinker">blinker</a>, both stable patterns (<a href="http://conwaylife.com/wiki/Oscillator">oscillators</a>) that will repeat endlessly between their two states. Below these you there is a <a href="http://conwaylife.com/wiki/Monogram">monogram</a> (another oscillator).
In the bottom left is a <a href="http://conwaylife.com/wiki/Pentadecathlon">pentadecathlon</a>.
Across the top starting from the top left you can see the <a href="http://conwaylife.com/wiki/Gosper%27s_glider_gun">Gosper's Glider Gun</a>
 a particularly interesting pattern that generates <a href="http://conwaylife.com/wiki/Glider">gliders</a>, small repetitve patterns
 that 'glide' accross the grid.  

NOTE: The colors in this demo are inverted from the standard style for
 asthetic purposes.

<br/>
<hr/>
<br/>

  <p class="title">Wireworld</p>

  <a href="https://en.wikipedia.org/wiki/Wireworld">Wireworld</a> is a cellular automata created by <a href="hhttps://en.wikipedia.org/wiki/Brian_Silverman">Brian Silverman</a>.
While relatively simple, it is easy to construct logic circuits in and
is Turing-complete. Wireworld has the following states
 (and their colors in the demo below): 

1) `Empty` (<span class="bold">Black</span>)\
2) `Conductor` (<span class="bold color-yellow-600">Yellow</span>)\
3) `Electron Head` (<span class="bold color-blue-600">Blue</span>)\
4) `Electron Tail` (<span class="bold color-red-600">Red</span>)\

These states update with the following rules:

1) An `Empty` stays `Empty`\
2) An `Electron Head` becomes an `Electron Tail`\
3) An `Electron Tail` becomes a `Conductor`\
4) A `Conductor` becomes an `Electron Head` if one or two neighbors are `Electron Head`, otherwise it stays a `Conductor`\
\
<div class="full-bleed" style="margin-bottom: 0.25em; padding: 0">
<canvas id="wireworld-canvas" height="1080" width="1920" class="full-bleed" style="width: 100%">
<div class="centered-text title white" style="background-color: black; padding: 1em">Please <a href="http://www.enable-javascript.com/">enable JavaScript</a> to see this demo.</div>
</canvas>
</div>
<div class="centered-text"><button id="wireworld-pause"><i class="material-icons">pause</i></button><button tabindex="0" onclick="doReset(event, this, initWW)"><i class="material-icons">replay</i></button></div>
<div class="centered-text">Wireworld with some clocks and logic elements.</div>

At the top left and just below are two clocks, circles of `Conductor` around
 each of which a single 'electron' (made of an `Electron Tail`
 and an `Electron head`) continuously circle. More `Conductor` cells coming off
 of these circles allow 'electrons' to flow to a series of 
 <a href="https://en.wikipedia.org/wiki/Logic_gate">gates</a> and
 <a href="https://en.wikipedia.org/wiki/Diode">diodes</a>. Some in-depth
 overviews of logic elements in Wireworld can be found at:
 <a href="https://www.quinapalus.com/wi-index.html">www.quinalpalus.com</a>,
 <a href="http://www.heise.ws/wireworld.html">www.heise.ws</a>,
 and <a href="http://karlscherer.com/Wireworld.html">karlscherer.com</a>.

<br/>
<hr/>
<br/>

  <p class="title">Rule 110</p>

  <p><a href="https://en.wikipedia.org/wiki/Rule_110">Rule 110</a> is an
 <a href="https://en.wikipedia.org/wiki/Elementary_cellular_automaton">elementary cellular automata</a>, meaning that it is a one-dimensional / single-row ceullar automata. With only two states (`0` and `1`) and eight rules, this simple automata is interesting because it because it produces intricate patterns and is the only Turing-complete elementary cellular automata. Cells in Rule 110 update based on their current value and that of their left and right neighbors according to the following rules:</p>
  <p>If left neighbor, current value, right neighbor are ...</p>
  <p class="centered-text">
`1` `1` `1`,  the next value is `0`  
`1` `1` `0`,  the next value is `1`  
`1` `0` `1`,  the next value is `1`  
`1` `0` `0`,  the next value is `0`  
`0` `1` `1`,  the next value is `1`  
`0` `1` `0`,  the next value is `1`  
`0` `0` `1`,  the next value is `1`  
`0` `0` `0`,  the next value is `0`  
  </p>
  <div class="full-bleed" style="margin-bottom: 0.25em; padding: 0"><canvas id="rule110-canvas" class="full-bleed" style="width: 100%;" height="1080" width="1920"><div class="white centered-text title" style="background-color: black; padding: 1em">Please <a href="http://www.enable-javascript.com/">enable JavaScript</a> to see this demo.</div></canvas></div>
  <div class="centered-text"><button id="rule110-pause"><i class="material-icons">pause</i></button><button onclick="doReset(event, this, initRule110)"><i class="material-icons">replay</i></button></div>
<div class="centered-text">Rule 110, the <code class="bold color-secondary bg-color-black" style="border: .1em solid #00e676; box-shadow: none">green</code> box bounds the current (bottom) row.</div>

NOTE: the colors in this demo are inverted from the standard style for
 asthetic purposes, and a typical Rule 110 automata implementation has an
 infinitely wide row. Since this demo uses a fixed-width row for the current
 state I've wrapped the left and right edges around to be neighbors instead.  

For more on elementary cellular automata visit
 <a href="http://mathworld.wolfram.com/ElementaryCellularAutomaton.html">The Wolfram Mathworld Entry</a>.

<br/>
<hr/>
<br/>

  <p class="title">Other Automata</p>
There are many, many other automata - there are 256 elementary cellular automata
 alone (!) Some other notable automata include:

 - <a href="https://en.wikipedia.org/wiki/Finite-state_machine">Finite State Machines</a> - useful for describing many forms of computation

 - <a href="https://en.wikipedia.org/wiki/Pushdown_automaton">Pushdown Automata</a> - more powerful than Finite State Machines, these have a <a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)">Stack</a>

 - <a href="https://en.wikipedia.org/wiki/Turing_machine">Turing Machines</a> - The most powerful Automata, a nice example is <a href="https://www.google.com/doodles/alan-turings-100th-birthday">the Google Doodle for Alan Turing's 100th Birthday</a>

 - <a href="https://minecraft.net/">Minecraft</a>'s <a href="http://minecraft.gamepedia.com/Redstone">Redstone</a> logic - essentially a 3D cellular automata

<!-- script for demos -->
<script>
/* generic snippet to prevent button focus on click*/
function buttonMouseDown(e) {
    e.preventDefault();
}
function setupButtons() {
    var buttons = document.getElementsByClassName("button");
    for (i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener("mousedown", buttonMouseDown);
    }
    var buttons = document.getElementsByTagName('button');
    for (i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener("mousedown", buttonMouseDown);
    }
}
window.addEventListener('onload', function() {
    setupButtons();
}());
/* end snippet*/

var framesPerSecond = 3;
function startRender(renderFunc, updateFunc) {
    var then = new Date().getTime();
    var interval = 1000 / framesPerSecond;

    function render() {
        requestAnimationFrame(render);
        var now = new Date().getTime();
        var delta = now - then;
        if (delta > interval) {
            then = now - (delta % interval);
            renderFunc();
            updateFunc();
        }
    }
    render();
}

var init = function() {
    // setup game of life
    var gol = new automata.GameOfLife(27, 48);
    var initGOL = function() {
        gol.init();
        // set up starting pattern
        var liveCells = [
            // start with gosper's glider gun
            {r:0, c:24}, {r:1, c:22}, {r:1, c:24}, {r:2, c:12}, {r:2, c:13},
            {r:2, c:20}, {r:2, c:21}, {r:2, c:21}, {r:2, c:34}, {r:2, c:35},
            {r:3, c:11}, {r:3, c:15}, {r:3, c:20}, {r:3, c:21}, {r:3, c:34},
            {r:3, c:35}, {r:4, c:0}, {r:4, c:1}, {r:4, c:10}, {r:4, c:16},
            {r:4, c:20}, {r:4, c:21}, {r:5, c:0}, {r:5, c:1}, {r:5, c:10},
            {r:5, c:14}, {r:5, c:16}, {r:5, c:17}, {r:5, c:22}, {r:5, c:24},
            {r:6, c:10}, {r:6, c:16}, {r:6, c:24}, {r:7, c:11}, {r:7, c:15},
            {r:8, c:12}, {r:8, c:13},
            // blinker
            {r:3, c:41}, {r:4, c:41}, {r:5, c:41},
            // beacon
            {r:0, c:44}, {r:0, c:45}, {r:1, c:44}, {r:2, c:47}, {r:3, c:46},
            {r:3, c:47},
            // pentadecathlon
            {r:21, c:4}, {r:21, c:5}, {r:22, c:6}, {r:20, c:6}, {r:21, c:7},
            {r:21, c:8}, {r:21, c:9}, {r:21, c:10}, {r:22, c:11},
            {r:20, c:11}, {r:21, c:12}, {r:21, c:13},
            // oscillator
            {r:11, c:38}, {r:11, c:39}, {r:11, c:43}, {r:11, c:44},
            {r:12, c:39}, {r:12, c:41}, {r:12, c:43},
            {r:13, c:39}, {r:13, c:40}, {r:13, c:42}, {r:13, c:43},
            {r:14, c:39}, {r:14, c:41}, {r:14, c:43},
            {r:15, c:38}, {r:15, c:39}, {r:15, c:43}, {r:15, c:44}
        ];
        for (var i = 0; i < liveCells.length; i++) {
            var cell = liveCells[i];
            gol.cells[cell.r][cell.c] = true;
        }
    };
    initGOL();
    window.initGOL = initGOL;

    // setup wireworld
    var ww = new automata.Wireworld(27, 48);
    var initWW = function() {
        ww.init();
        var wwCells = [
            // clock
            {r:0, c:1, v:3}, {r:0, c:2, v:2}, {r:0, c:3, v:1},
            {r:1, c:0, v:1}, {r:1, c:4, v:1},
            {r:2, c:0, v:1}, {r:2, c:4, v:1},
            {r:3, c:0, v:1}, {r:3, c:4, v:1},
            {r:4, c:0, v:1}, {r:4, c:4, v:1},
            {r:5, c:0, v:1}, {r:5, c:4, v:1},
            {r:6, c:1, v:1}, {r:6, c:2, v:1}, {r:6, c:3, v:1},
            // wire to some diodes
            {r:3, c:5, v:1}, {r:3, c:6, v:1}, {r:3, c:7, v:1},
            {r:3, c:8, v:1}, {r:3, c:9, v:1}, {r:3, c:10, v:1},
            {r:3, c:11, v:1},
            {r:2, c:11, v:1}, {r:1, c:12, v:1}, {r:1, c:13, v:1},
            {r:4, c:11, v:1}, {r:5, c:12, v:1}, {r:5, c:13, v:1},
            {r:1, c:14, v:1}, {r:5, c:14, v:1},
            {r:1, c:11, v:1}, {r:5, c:11, v:1},
            // diode
            {r:0, c:15, v:1}, {r:1, c:15, v:1}, {r:2, c:15, v:1},
            {r:0, c:16, v:1}, {r:2, c:16, v:1},
            {r:1, c:17, v:1}, {r:1, c:18, v:1},
            // reverse diode
            {r:4, c:15, v:1}, {r:6, c:15, v:1},
            {r:4, c:16, v:1}, {r:5, c:16, v:1}, {r:6, c:16, v:1},
            {r:5, c:17, v:1}, {r:5, c:18, v:1},
            // faster clock
            {r:9, c:0, v:1}, {r:8, c:1, v:1}, {r:8, c:2, v:1},
            {r:8, c:3, v:1}, {r:8, c:4, v:3}, {r:8, c:5, v:2},
            {r:10, c:1, v:1}, {r:10, c:2, v:1}, {r:10, c:3, v:1},
            {r:10, c:4, v:1}, {r:10, c:5, v:1}, {r:9, c:6, v:1},
            {r:9, c:7, v:1}, {r:9, c:8, v:1}, {r:9, c:9, v:1},
            {r:9, c:10, v:1}, {r:9, c:11, v:1}, {r:9, c:12, v:1},
            {r:9, c:13, v:1}, {r:9, c:14, v:1},
            // diode
            {r:8, c:15, v:1}, {r:9, c:15, v:1}, {r:10, c:15, v:1},
            {r:8, c:16, v:1}, {r:10, c:16, v:1},
            {r:9, c:17, v:1}, {r:9, c:18, v:1},
            // xor
            {r:1, c:19, v:1}, {r:9, c:19, v:1},
            {r:1, c:20, v:1}, {r:1, c:21, v:1}, {r:1, c:22, v:1},
            {r:2, c:23, v:1}, {r:3, c:23, v:1}, {r:1, c:23, v:1},
            {r:4, c:22, v:1}, {r:4, c:23, v:1}, {r:4, c:24, v:1},
            {r:4, c:25, v:1}, {r:5, c:22, v:1}, {r:5, c:25, v:1},
            {r:5, c:26, v:1}, {r:6, c:22, v:1}, {r:6, c:23, v:1},
            {r:6, c:24, v:1}, {r:6, c:25, v:1}, {r:9, c:23, v:1},
            {r:9, c:20, v:1}, {r:9, c:21, v:1}, {r:9, c:22, v:1},
            {r:7, c:23, v:1}, {r:8, c:23, v:1}, {r:5, c:27, v:1},
            // flip flop
            {r:5, c:28, v:1}, {r:5, c:29, v:1}, {r:4, c:29, v:1},
            {r:3, c:29, v:1}, {r:2, c:29, v:1}, {r:1, c:29, v:1}, 
            {r:0, c:29, v:1}, {r:0, c:30, v:1}, {r:0, c:31, v:1},
            {r:0, c:32, v:1}, {r:2, c:32, v:1}, {r:2, c:33, v:1},
            {r:1, c:33, v:1}, {r:3, c:33, v:1}, {r:2, c:34, v:1},
            {r:2, c:35, v:1}, {r:3, c:35, v:1}, {r:3, c:36, v:1},
            {r:4, c:32, v:2}, {r:4, c:35, v:1}, {r:4, c:37, v:1},
            {r:4, c:38, v:1}, {r:4, c:39, v:1}, {r:5, c:31, v:3},
            {r:5, c:33, v:1}, {r:5, c:34, v:1}, {r:5, c:35, v:1},
            {r:5, c:36, v:1}, {r:6, c:32, v:1}, {r:6, c:35, v:1},
            {r:4, c:40, v:1},
            // wire
            {r:3, c:40, v:1}, {r:2, c:40, v:1}, {r:1, c:40, v:1},
            {r:0, c:40, v:1}, {r:0, c:41, v:1}, {r:0, c:42, v:1},
            {r:0, c:43, v:1}, {r:0, c:44, v:1}, {r:0, c:45, v:1},
            {r:0, c:46, v:1}, {r:0, c:47, v:1}, {r:1, c:47, v:1},
            {r:2, c:47, v:1}, {r:3, c:47, v:1}, {r:4, c:47, v:1},
            {r:5, c:47, v:1}, {r:6, c:47, v:1}, {r:7, c:47, v:1},
            {r:8, c:47, v:1}, {r:9, c:47, v:1}, {r:10, c:47, v:1},
            {r:11, c:47, v:1}, {r:12, c:47, v:1}, {r:13, c:47, v:1},
            {r:14, c:47, v:1},
            {r:15, c:47, v:1}, {r:15, c:46, v:1}, {r:15, c:45, v:1},
            {r:15, c:44, v:1}, {r:15, c:43, v:1}, {r:15, c:42, v:1},
            {r:15, c:41, v:1}, {r:15, c:40, v:1}, {r:15, c:39, v:1},
            {r:15, c:38, v:1}, {r:15, c:37, v:1}, {r:15, c:36, v:1},
            {r:15, c:35, v:1}, {r:15, c:34, v:1}, {r:15, c:33, v:1},
            {r:15, c:32, v:1}, {r:15, c:31, v:1}, {r:15, c:30, v:1},
            {r:15, c:29, v:1}, {r:15, c:28, v:1}, {r:15, c:27, v:1},
            {r:15, c:26, v:1}, {r:15, c:25, v:1}, {r:15, c:24, v:1},
            {r:15, c:23, v:1}, {r:15, c:22, v:1}, {r:15, c:21, v:1},
            {r:15, c:20, v:1}, {r:15, c:19, v:1}, {r:15, c:18, v:1},
            {r:15, c:17, v:1}, {r:15, c:16, v:1}, {r:15, c:15, v:1},
            {r:15, c:14, v:1}, {r:15, c:13, v:1}, {r:15, c:12, v:1},
            {r:15, c:11, v:1}, {r:15, c:10, v:1}, {r:15, c:9, v:1},
            {r:15, c:8, v:1}, {r:15, c:7, v:1}, {r:15, c:6, v:1},
            {r:15, c:5, v:1}, {r:15, c:4, v:1}, {r:15, c:3, v:1},
            {r:15, c:2, v:1}, {r:15, c:1, v:1}, {r:15, c:0, v:1},
            {r:15, c:0, v:1}, {r:16, c:0, v:1}, {r:17, c:0, v:1},
            // W
            {r:18, c:0, v:1}, {r:19, c:0, v:1}, {r:20, c:0, v:1},
            {r:21, c:0, v:1}, {r:22, c:0, v:1}, {r:23, c:0, v:1},
            {r:23, c:1, v:1}, {r:23, c:2, v:1}, {r:22, c:2, v:1},
            {r:21, c:2, v:1}, {r:20, c:2, v:1}, {r:23, c:3, v:1},
            {r:23, c:4, v:1}, {r:22, c:4, v:1}, {r:21, c:4, v:1},
            {r:20, c:4, v:1}, {r:19, c:4, v:1}, {r:18, c:4, v:1},
            {r:18, c:5, v:1},
            // I
            {r:18, c:6, v:1}, {r:18, c:7, v:1}, {r:19, c:8, v:1},
            {r:20, c:8, v:1}, {r:21, c:8, v:1}, {r:22, c:8, v:1},
            {r:23, c:7, v:1}, {r:23, c:6, v:1}, {r:23, c:8, v:1},
            {r:18, c:8, v:1}, {r:18, c:9, v:1}, {r:18, c:10, v:1},
            {r:23, c:9, v:1}, {r:23, c:10, v:1},
            // R
            {r:18, c:11, v:1}, {r:18, c:12, v:1}, {r:19, c:12, v:1},
            {r:20, c:12, v:1}, {r:21, c:12, v:1}, {r:22, c:12, v:1},
            {r:23, c:12, v:1}, {r:21, c:13, v:1}, {r:21, c:14, v:1},
            {r:22, c:15, v:1}, {r:23, c:15, v:1}, {r:18, c:13, v:1},
            {r:19, c:15, v:1}, {r:20, c:15, v:1}, {r:18, c:14, v:1},
            // E
            {r:23, c:16, v:1}, {r:23, c:17, v:1}, {r:22, c:17, v:1},
            {r:21, c:17, v:1}, {r:20, c:17, v:1}, {r:19, c:17, v:1},
            {r:18, c:17, v:1}, {r:18, c:18, v:1}, {r:21, c:18, v:1},
            {r:23, c:18, v:1}, {r:18, c:19, v:1}, {r:21, c:19, v:1},
            {r:23, c:19, v:1}, {r:23, c:20, v:1}, {r:23, c:21, v:1},
            {r:18, c:20, v:1}, {r:21, c:20, v:1},
            // W
            {r:23, c:22, v:1}, {r:22, c:22, v:1}, {r:21, c:22, v:1},
            {r:20, c:22, v:1}, {r:19, c:22, v:1}, {r:18, c:22, v:1},
            {r:23, c:23, v:1}, {r:23, c:24, v:1}, {r:22, c:24, v:1},
            {r:21, c:24, v:1}, {r:20, c:24, v:1}, {r:23, c:25, v:1},
            {r:23, c:26, v:1}, {r:22, c:26, v:1}, {r:21, c:26, v:1},
            {r:20, c:26, v:1}, {r:19, c:26, v:1}, {r:18, c:26, v:1},
            // O
            {r:18, c:27, v:1}, {r:18, c:28, v:1}, {r:19, c:28, v:1},
            {r:20, c:28, v:1}, {r:21, c:28, v:1}, {r:22, c:28, v:1},
            {r:23, c:28, v:1}, {r:18, c:29, v:1}, {r:18, c:30, v:1},
            {r:23, c:29, v:1}, {r:23, c:30, v:1}, {r:23, c:31, v:1},
            {r:22, c:31, v:1}, {r:21, c:31, v:1}, {r:20, c:31, v:1},
            {r:19, c:31, v:1}, {r:18, c:31, v:1}, {r:18, c:32, v:1},
            // R
            {r:18, c:33, v:1}, {r:18, c:34, v:1}, {r:19, c:34, v:1},
            {r:20, c:34, v:1}, {r:21, c:34, v:1}, {r:22, c:34, v:1},
            {r:23, c:34, v:1}, {r:21, c:35, v:1}, {r:21, c:35, v:1},
            {r:21, c:36, v:1}, {r:22, c:37, v:1}, {r:23, c:37, v:1},
            {r:18, c:35, v:1}, {r:18, c:36, v:1}, {r:19, c:37, v:1},
            {r:20, c:37, v:1}, {r:23, c:38, v:1},
            // L
            {r:23, c:39, v:1}, {r:22, c:39, v:1}, {r:21, c:39, v:1},
            {r:20, c:39, v:1}, {r:19, c:39, v:1}, {r:18, c:39, v:1},
            {r:23, c:40, v:1}, {r:23, c:41, v:1}, {r:23, c:42, v:1},
            // D
            {r:23, c:43, v:1}, {r:22, c:43, v:1},
            {r:21, c:43, v:1}, {r:20, c:43, v:1}, {r:19, c:43, v:1},
            {r:18, c:43, v:1}, {r:18, c:44, v:1}, {r:18, c:45, v:1},
            {r:23, c:44, v:1}, {r:23, c:45, v:1}, {r:19, c:46, v:1},
            {r:20, c:46, v:1}, {r:21, c:46, v:1}, {r:22, c:46, v:1},
            // wire
            {r:23, c:47, v:1}, {r:24, c:47, v:1}, {r:25, c:47, v:1},
            {r:26, c:47, v:1}, {r:26, c:46, v:1}, {r:26, c:45, v:1},
            {r:26, c:44, v:1}, {r:26, c:43, v:1}, {r:26, c:42, v:1},
            {r:26, c:41, v:1}, {r:26, c:40, v:1}, {r:26, c:39, v:1},
            {r:26, c:38, v:1}, {r:26, c:37, v:1}, {r:26, c:36, v:1},
            {r:26, c:35, v:1}, {r:26, c:34, v:1}, {r:26, c:33, v:1},
            {r:26, c:32, v:1}, {r:26, c:31, v:1}, {r:26, c:30, v:1},
            {r:26, c:29, v:1}, {r:26, c:28, v:1}, {r:26, c:27, v:1},
            {r:26, c:26, v:1}, {r:26, c:25, v:1}, {r:26, c:24, v:1},
            {r:26, c:23, v:1}, {r:26, c:22, v:1}, {r:26, c:21, v:1},
            {r:26, c:20, v:1}, {r:26, c:19, v:1}, {r:26, c:18, v:1},
            {r:26, c:17, v:1}, {r:26, c:16, v:1}, {r:26, c:15, v:1},
            {r:26, c:14, v:1}, {r:26, c:13, v:1}, {r:26, c:12, v:1},
            {r:26, c:11, v:1}, {r:26, c:10, v:1}, {r:26, c:9, v:1},
            {r:26, c:8, v:1}, {r:26, c:7, v:1}, {r:26, c:6, v:1},
            {r:26, c:5, v:1}, {r:26, c:4, v:1}, {r:26, c:3, v:1},
            {r:26, c:2, v:1}, {r:26, c:1, v:1}, {r:26, c:0, v:1},
        ];
        for (var i = 0; i < wwCells.length; i++) {
            var cell = wwCells[i];
            ww.cells[cell.r][cell.c] = cell.v;
        }
    };
    initWW();
    window.initWW = initWW;

    var rule110 = new automata.Rule110(27, 48);
    function initRule110() {
        rule110.init();
        rule110.cells[rule110.rows-1][rule110.cols-1] = true;
    }
    initRule110();
    window.initRule110 = initRule110;

    // setup rendering
    var golCanvas = document.getElementById("gol-canvas");
    var wwCanvas = document.getElementById("wireworld-canvas");
    var rule110Canvas = document.getElementById("rule110-canvas");

    function makePauseFunction(pauseElem) {
        var pause = '<i class="material-icons">pause</i>';
        var play = '<i class="material-icons">play_arrow</i>';
        var isPausedVal = false;
        return {
            pauseToggle: function(event) {
                if (pauseElem.innerHTML.includes("pause")) {
                    pauseElem.innerHTML = play;
                    isPausedVal = true;
                } else {
                    pauseElem.innerHTML = pause;
                    isPausedVal = false;
                }
            },
            isPaused: function() {
                return isPausedVal;
            },
        };
    };

    var golPauseElem = document.getElementById("gol-pause");
    golPause = makePauseFunction(golPauseElem);
    golPauseElem.onclick = golPause.pauseToggle;
    startRender(function() {
        gol.render(golCanvas);
    },
    function() {
        if (!golPause.isPaused()) {
             gol.update();
        }
    });

    var wireworldPauseElem = document.getElementById("wireworld-pause");
    wireworldPause = makePauseFunction(wireworldPauseElem);
    wireworldPauseElem.onclick = wireworldPause.pauseToggle;
    startRender(function() {
        ww.render(wwCanvas);
    }, 
    function() {
        if (!wireworldPause.isPaused()) {
            ww.update();
        }
    });

    var rule110PauseElem = document.getElementById("rule110-pause");
    rule110Pause = makePauseFunction(rule110PauseElem);
    rule110PauseElem.onclick = rule110Pause.pauseToggle;
    startRender(function() {
        rule110.render(rule110Canvas);
    }, 
    function() {
        if (!rule110Pause.isPaused()) {
            rule110.update();
        }
    });
}

function doReset(event, div, resetFunc) {
    resetFunc();
}

// FROM: https://stackoverflow.com/questions/950087/how-do-i-include-a-javascript-file-in-another-javascript-file
function loadScript(url, callback)
{
    // Adding the script tag to the head as suggested before
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;

    // Then bind the event to the callback function.
    // There are several events for cross browser compatibility.
    script.onreadystatechange = callback;
    script.onload = callback;

    // Fire the loading
    head.appendChild(script);
};
loadScript("/scripts/automata.js", init);
</script>